"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[61],{9061:function(e,s,a){a.r(s),a.d(s,{RecordDetailsDialog:function(){return _},default:function(){return C}});var t=a(7437),l=a(6110),n=a(2339),i=a(2265),d=a(314),r=a(4508);let o=i.forwardRef((e,s)=>{let{className:a,children:l,...n}=e;return(0,t.jsxs)(d.fC,{ref:s,className:(0,r.cn)("relative overflow-hidden",a),...n,children:[(0,t.jsx)(d.l_,{className:"h-full w-full rounded-[inherit]",children:l}),(0,t.jsx)(c,{}),(0,t.jsx)(d.Ns,{})]})});o.displayName=d.fC.displayName;let c=i.forwardRef((e,s)=>{let{className:a,orientation:l="vertical",...n}=e;return(0,t.jsx)(d.gb,{ref:s,orientation:l,className:(0,r.cn)("flex touch-none select-none transition-colors","vertical"===l&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===l&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...n,children:(0,t.jsx)(d.q4,{className:"relative flex-1 rounded-full bg-border"})})});c.displayName=d.gb.displayName;var x=a(5974),m=a(2869),u=a(8736),h=a(3245),f=a(3774),p=a(1947),N=a(8867),v=a(2735);let j=0,g=new Map,b=e=>{if(g.has(e))return;let s=setTimeout(()=>{g.delete(e),T({type:"REMOVE_TOAST",toastId:e})},1e6);g.set(e,s)},y=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=s;return a?b(a):e.toasts.forEach(e=>{b(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},w=[],S={toasts:[]};function T(e){S=y(S,e),w.forEach(e=>{e(S)})}function A(e){let{...s}=e,a=(j=(j+1)%Number.MAX_SAFE_INTEGER).toString(),t=()=>T({type:"DISMISS_TOAST",toastId:a});return T({type:"ADD_TOAST",toast:{...s,id:a,open:!0,onOpenChange:e=>{e||t()}}}),{id:a,dismiss:t,update:e=>T({type:"UPDATE_TOAST",toast:{...e,id:a}})}}var E=a(2003),R=a(3108);function _(e){var s,a,d,r,c,j,g,b,y,_,C,O,M,D,I,k,U,W,z,B,V;let{open:P,onOpenChange:Z,record:L}=e,{toast:F}=function(){let[e,s]=i.useState(S);return i.useEffect(()=>(w.push(s),()=>{let e=w.indexOf(s);e>-1&&w.splice(e,1)}),[e]),{...e,toast:A,dismiss:e=>T({type:"DISMISS_TOAST",toastId:e})}}();if(!L)return null;let J=(null===(s=L.metadata)||void 0===s?void 0:s.tiles)?Object.values(L.metadata.tiles).map(e=>e.text_blob||"").join("\n\n"):"",G="Unknown";J.includes("STORM SEWER")||J.includes("STM")||J.includes("SANITARY")?G="Sewer Plan":J.includes("WATER MAIN")||J.includes("W.M.")||J.includes("WATERMAIN")?G="Water Main":(J.includes("PAVEMENT")||J.includes("ROAD"))&&(G="Road Plan");let q=[];return(J.includes("STORM SEWER")||J.includes("STM"))&&q.push("Storm Sewer"),(J.includes("SANITARY")||J.includes("SAN"))&&q.push("Sanitary Sewer"),(J.includes("WATER MAIN")||J.includes("W.M.")||J.includes("WATERMAIN"))&&q.push("Water Main"),(J.includes("PAVEMENT")||J.includes("ROAD"))&&q.push("Road"),(J.includes("CURB")||J.includes("GUTTER"))&&q.push("Curb & Gutter"),(J.includes("SIDEWALK")||J.includes("S/W"))&&q.push("Sidewalk"),(J.includes("CATCH BASIN")||J.includes("C.B."))&&q.push("Catch Basin"),(J.includes("MANHOLE")||J.includes("M.H."))&&q.push("Manhole"),(0,t.jsx)(l.Vq,{open:P,onOpenChange:Z,children:(0,t.jsxs)(l.cZ,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,t.jsxs)(l.fK,{children:[(0,t.jsxs)(l.$N,{className:"flex items-center",children:[(0,t.jsx)(u.Z,{className:"h-5 w-5 mr-2"}),"Record Details: ",L.record_id]}),(0,t.jsx)(l.Be,{children:"Detailed information about the processed record"})]}),(0,t.jsxs)(n.mQ,{defaultValue:"summary",className:"flex-1 overflow-hidden flex flex-col",children:[(0,t.jsxs)(n.dr,{children:[(0,t.jsxs)(n.SP,{value:"summary",className:"flex items-center",children:[(0,t.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Summary"]}),(0,t.jsxs)(n.SP,{value:"text",className:"flex items-center",children:[(0,t.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"Extracted Text"]}),(0,t.jsxs)(n.SP,{value:"map",className:"flex items-center",children:[(0,t.jsx)(f.Z,{className:"h-4 w-4 mr-2"}),"Map View"]}),(0,t.jsxs)(n.SP,{value:"json",className:"flex items-center",children:[(0,t.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"Raw JSON"]})]}),(0,t.jsx)(n.nU,{value:"summary",className:"flex-1 overflow-hidden",children:(0,t.jsx)(o,{className:"h-[calc(80vh-180px)]",children:(0,t.jsxs)("div",{className:"space-y-6 p-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Basic Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Record ID"}),(0,t.jsx)("p",{className:"font-mono",children:L.record_id})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Drawing Type"}),(0,t.jsx)(x.C,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:G})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Location"}),(0,t.jsx)("p",{children:(V=null===(d=L.metadata)||void 0===d?void 0:null===(a=d.georeference)||void 0===a?void 0:a.intersection)?V:"N/A"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Address"}),(0,t.jsx)("p",{className:"text-sm",children:(null===(c=L.metadata)||void 0===c?void 0:null===(r=c.georeference)||void 0===r?void 0:r.address)||"N/A"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Confidence"}),(0,t.jsxs)(x.C,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:[(100*((null===(g=L.metadata)||void 0===g?void 0:null===(j=g.georeference)||void 0===j?void 0:j.trust_score)||0)).toFixed(0),"%"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Georeference Source"}),(0,t.jsx)("p",{children:(null===(y=L.metadata)||void 0===y?void 0:null===(b=y.georeference)||void 0===b?void 0:b.georeference_source)||"Unknown"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Geographic Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Coordinates"}),(0,t.jsxs)("p",{className:"font-mono",children:["Lat: ",(null===(O=L.metadata)||void 0===O?void 0:null===(C=O.georeference)||void 0===C?void 0:null===(_=C.lat)||void 0===_?void 0:_.toFixed(6))||"N/A",(0,t.jsx)("br",{}),"Lon: ",(null===(I=L.metadata)||void 0===I?void 0:null===(D=I.georeference)||void 0===D?void 0:null===(M=D.lon)||void 0===M?void 0:M.toFixed(6))||"N/A"]})]}),(null===(k=L.metadata)||void 0===k?void 0:k.bounding_box)&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Bounding Box"}),(0,t.jsxs)("p",{className:"font-mono text-sm",children:["NE: ",L.metadata.bounding_box.northeast.lat.toFixed(6),","," ",L.metadata.bounding_box.northeast.lng.toFixed(6),(0,t.jsx)("br",{}),"SW: ",L.metadata.bounding_box.southwest.lat.toFixed(6),","," ",L.metadata.bounding_box.southwest.lng.toFixed(6)]})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Drawing Content Analysis"}),(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Key Elements"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-1 mt-1",children:[q.map(e=>(0,t.jsx)(x.C,{variant:"outline",className:"bg-gray-100",children:e},e)),0===q.length&&(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"No key elements identified"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Text Preview"}),(0,t.jsx)("div",{className:"bg-gray-50 p-3 rounded-md mt-1",children:(0,t.jsxs)("p",{className:"text-sm line-clamp-3",children:[J.substring(0,200),"..."]})})]})]}),L.error&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2 text-red-600",children:"Errors"}),(0,t.jsx)("p",{className:"text-red-600",children:L.error})]})]})})}),(0,t.jsxs)(n.nU,{value:"text",className:"flex-1 overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex justify-end gap-2 p-2 bg-gray-50 border-b",children:[(0,t.jsxs)(m.z,{variant:"outline",size:"sm",onClick:()=>{"undefined"!=typeof navigator&&(navigator.clipboard.writeText(J),F({title:"Text Copied",description:"The extracted text has been copied to your clipboard."}))},children:[(0,t.jsx)(N.Z,{className:"h-4 w-4 mr-2"}),"Copy Text"]}),(0,t.jsxs)(m.z,{variant:"outline",size:"sm",onClick:()=>{{let e=new Blob([J],{type:"text/plain"}),s=URL.createObjectURL(e),a=document.createElement("a");a.href=s,a.download="".concat(L.record_id,"_text.txt"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)}},children:[(0,t.jsx)(v.Z,{className:"h-4 w-4 mr-2"}),"Download"]})]}),(0,t.jsx)(o,{className:"h-[calc(80vh-220px)]",children:(0,t.jsx)("div",{className:"p-4",children:(0,t.jsx)("pre",{className:"whitespace-pre-wrap font-mono text-sm",children:J})})})]}),(0,t.jsx)(n.nU,{value:"map",className:"flex-1 overflow-hidden",children:(0,t.jsx)("div",{className:"h-[calc(80vh-180px)]",children:(0,t.jsx)(E.q,{fallback:(0,t.jsx)("div",{className:"flex items-center justify-center h-full",children:"Loading map..."}),children:(null===(U=L.metadata)||void 0===U?void 0:U.bounding_box)?(0,t.jsx)(R.Bu,{boundingBox:L.metadata.bounding_box,markers:[{id:L.record_id,lat:(null===(W=L.metadata.georeference)||void 0===W?void 0:W.lat)||0,lng:(null===(z=L.metadata.georeference)||void 0===z?void 0:z.lon)||0,title:(null===(B=L.metadata.georeference)||void 0===B?void 0:B.intersection)||L.record_id}]}):(0,t.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,t.jsx)("p",{className:"text-gray-500",children:"No geographic data available for this record."})})})})}),(0,t.jsxs)(n.nU,{value:"json",className:"flex-1 overflow-hidden",children:[(0,t.jsx)("div",{className:"flex justify-end gap-2 p-2 bg-gray-50 border-b",children:(0,t.jsxs)(m.z,{variant:"outline",size:"sm",onClick:()=>{"undefined"!=typeof navigator&&(navigator.clipboard.writeText(JSON.stringify(L,null,2)),F({title:"JSON Copied",description:"The raw JSON data has been copied to your clipboard."}))},children:[(0,t.jsx)(N.Z,{className:"h-4 w-4 mr-2"}),"Copy JSON"]})}),(0,t.jsx)(o,{className:"h-[calc(80vh-220px)]",children:(0,t.jsx)("div",{className:"p-4",children:(0,t.jsx)("pre",{className:"bg-gray-50 p-3 rounded-md text-sm whitespace-pre-wrap font-mono overflow-x-auto",children:JSON.stringify(L,null,2)})})})]})]})]})})}var C=_},6110:function(e,s,a){a.d(s,{$N:function(){return h},Be:function(){return f},Vq:function(){return r},cZ:function(){return m},fK:function(){return u},hg:function(){return o}});var t=a(7437),l=a(2265),n=a(9027),i=a(2489),d=a(4508);let r=n.fC,o=n.xz,c=n.h_;n.x8;let x=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(n.aV,{ref:s,className:(0,d.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...l})});x.displayName=n.aV.displayName;let m=l.forwardRef((e,s)=>{let{className:a,children:l,...r}=e;return(0,t.jsxs)(c,{children:[(0,t.jsx)(x,{}),(0,t.jsxs)(n.VY,{ref:s,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...r,children:[l,(0,t.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(i.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=n.VY.displayName;let u=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...a})};u.displayName="DialogHeader";let h=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(n.Dx,{ref:s,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",a),...l})});h.displayName=n.Dx.displayName;let f=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(n.dk,{ref:s,className:(0,d.cn)("text-sm text-muted-foreground",a),...l})});f.displayName=n.dk.displayName}}]);